%!TEX program = xelatex
\documentclass{ctexart}
\usepackage{amsmath}
\usepackage[table]{xcolor}
\usepackage{geometry}
\usepackage{fancyhdr}
\usepackage{float}
\pagestyle{fancy}
\fancyhf{}
\geometry{a4paper,left=2.5cm,right=2.5cm}
\usepackage{graphicx}
\usepackage{amssymb}
\title{“拍照赚钱”的任务定价策略}
\cfoot{\thepage}
\date{}
\begin{document}
\maketitle
\begin{abstract}
移动互联网时代实现了照片拍摄市场与摄影师之间的实时互通，本文应用非线性拟合的手段，结合图像分析，对不同位置的任务的定价问题进行了分析。研究了原有定价方案与供需关系的进一步优化,于已有数据进行聚簇分析，化简了繁冗的现实模型，

针对问题一，从附录一获取资料之后，首先用散点图画出了任务的位置分布情况，为了讨论定价规律，我们选位置的经纬作为考察变量，利用典型相关分析求位置、价格和完成度的相关系数。发现他们的弱相关关系后，我们就利用集簇的思想，把图划分为几个区域，，并利用聚簇分析网格法分别讨论个区域的定价情况。最后，建立任务完成度函数T = f(K)作为指标，得了任务完成率与区域关系的的数学模型，并综合附录二的数据，利用曲线算法拟合得到了任务完成度模型，并将其利用于评价任务未完成的原因。

针对问题二，我们对选定的城区进行网格状划分;使用网格近似处理任务分布、以网格作为聚簇的基本单位、

针对问题三，考虑到任务分布区域性高，呈簇集形状，于是我们通过k-mean算法以欧式距离为分类标准对数据进行聚类区分，并把距离相近的任务打包发布，
针对问题四，我们主要利用问题(2)中的重新优化改进的数学模型，把问题

最终，我们结合实际的APP软件以及会员分布情况，对之前的所有模型做出了客观评价以及优化。
[关键词] 聚簇分析\ 曲线拟合\ 供需关系\ 贪心算法\ 
\end{abstract}
\newpage
\subsection{符号分析}
\section{问题重述}
“拍照赚钱”是移动互联网下的一种自助式服务模式。用户下载APP，注册成为APP的会员，然后从APP上领取需要拍照的任务（比如上超市去检查某种商品的上架情况），赚取APP对任务所标定的酬金。这种基于移动互联网的自助式劳务众包平台，为企业提供各种商业检查和信息搜集，相比传统的市场调查方式可以大大节省调查成本，而且有效地保证了调查数据真实性，缩短了调查的周期。因此APP成为该平台运行的核心，而APP中的任务定价又是其核心要素。如果定价不合理，有的任务就会无人问津，而导致商品检查的失败。

1.研究附件一中项目的任务定价规律，分析任务未完成的原因。

2.为附件一中的项目设计新的任务定价方案，并和原方案进行比较。

3.实际情况下，多个任务可能因为位置比较集中，导致用户会争相选择，一种考虑是将这些任务联合在一起打包发布。在这种考虑下，如何修改前面的定价模型，对最终的任务完成情况又有什么影响？

4.对附件三中的新项目给出你的任务定价方案，并评价该方案的实施效果。
\section{问题分析}
\subsection{问题(1)的分析}
该问题要求研究已发布任务的定价规律，以及任务未完成的原因。本文基于“附件一：已结束项目任务数据”中任务分配的GPS经度，纬度，建立了研究任务定价规律的数学模型，并用来评价任务分配的模型。我们考虑用热力图和三维图来对不同地区进行区域性分析，再用典型回归分析计算价格，地区的相关性以及完成度，地区的相关性，看二者是强相关还是弱相关，聚簇分析网格法，在这里我们用一个横轴为纬度，纵轴为经度的坐标轴把任务位置表示出来并且以5*5公里的矩形把图形划分为多个小区域，再分别考虑各个区块的定价情况，并以此来探讨任务为完成的原因。
\subsection{问题(2)的分析}
该问题要求重新设计定价方案，并与原有方案作比较。项目一的定价方式太过简单，只单单考虑了位置因素，而忽视了会员的位置分布以及会员的信誉度。会员的位置分布不是随机的，会员的活动范围是有限的，而且会员的信誉度表明不同会员对于不同价格与位置的任务的接单意愿有所不同的，在重新定价时，这些因素都必须考虑进去。
\subsection{问题(3)的分析}
这应该是仿真过程，因为第二问和第三问用的是一个模型，就是多了个打包，可以仿真模拟改变参数后的指标（完成度和价格），指标看主观意愿决定。关于表格2的时间，考虑的是在已有需求的情况下，按照时间顺序一个个放进用户，按照信誉度决定表格3的任务分配。
\subsection{问题(4)的分析}
对于问题(4)，我们考虑在问题(2)的基础上，主要把问题(2)中利用贪心算法的模型应用到上面来。
\section{模型假设}
1.每个会员每次只接单1单，不同时接单2单

2.默认每天的天气都正常，不考虑天气因素导致会员不接单

3.会员能及时收到预订信息

4.会员在接受任务后，不会中途放弃任务

5.在整个定价过程中，没有新会员增加，没有老会员减少



\section{模型建立与求解}
\subsection{问题(1)的模型建立与求解}
根据题目要求，从附录一获取资料之后，我们首先粗略研究了一下发布的这些任务的位置分布关系，未来便于直观理解，我们用位置图画出了任务的位置分布情况。为了进一步讨论原有任务的定价规律，我们选位置的经纬作为考察变量。此时，注意到不同区域的任务密度是不同的，所以我们又利用集簇的思想，将数据处理在划分好的各个区域内，从而 有效规避了此问题，并且精简了数据规模，使结果更加直观，得到了不同区域的价格分布。最后，我们建立了任务完成度函数作为指标，得了任务完成率与区域关系的的数学模型，并综合附录二的数据，利用曲线算法拟合得到了任务完成度模型，并将其利用于评价任务未完成的原因。
\subsubsection{数据的获取}
从文件附录一的任务获取了所有任务的经度，纬度，以及价格以及任务完成情况的信息，我们求出该地区大约在珍珠三角一带，数据密集的地区为深圳，佛山和东莞。我们根据然后将数据的经纬度转化为公里数，我们计算出在该地区，纬度1度= 111 km，经度1度= 102km，因此将经纬度换算为公里数后将该地区按照公里数分块。
\begin{figure}[htbp] 
\centering
\includegraphics[width=0.7\textwidth]{地图} 
\caption{完成与未完成任务分布}
\end{figure}
\newpage
\subsubsection{建立任务的关系图}
在得到数据并初步处理的基础上,我们首先考虑了任务随经纬度分布的情况，于是我们分别作了散点图来表示任务的离散分布情况，作三维图分析图的通过作图发现任务呈现集中分布，作了等高线啦表现不同区域价格的变化情况，通过作图我们得出有几个中心任务分布比较密集，应该就是深圳，佛山和东莞。然后重点考察了任务的经纬度数据,把任务的完成度作为指标，考察价格随经纬度变化的三维图来表示价格的分布规律，以纬度为x轴，经度为y轴，价格为z轴，红点用于表示任务被完成。通过热力图与三维图(我们初步得出了任务完成度与位置的关系，发现价格有集中分布的趋势，某一地点的价格与其附近的价格大致相同。
\begin{figure}[htbp] 
\centering
\includegraphics[width=0.7\textwidth]{散点图} 
\caption{定价与经纬度的关系}
\end{figure}
\begin{figure}[htbp] 
\centering
\includegraphics[width=0.7\textwidth]{价格经纬三维} 
\caption{定价与经纬度的三维图}
\end{figure}
\begin{figure}[htbp] 
\centering
\includegraphics[width=1\textwidth]{价格经纬等高线} 
\caption{定价与经纬度的等高线}
\end{figure}

我们又分析价格与完成度的关系,利用线性回归分析，得出了任务总数与总价的关系。
从这些图当中，我们可以很直观的发现：任务总数与总价之间有很明显的线性关系。在结果中可以看出价格的分布与地域有很轻的关联性，其中在同一块区域内的价格分布大体相同，说明区域位置对价格的影响十分显著因此需要通过分区域划分。我们又通过统计
最后我们通过分段研究价格与通过率的关系，发现价格与通过率之间有很明显的相关关系。

\subsubsection{利用典型相关分析对相关性进行检验}
通过第2布的分析我们初步看出经度与纬度都对定价和完成率有影响，因此我们很自然地想到计算经度纬度与价格以及地区完成度的相关度，但是因为经度与纬度都是变量并且可能对价格以及地区的完成度造成影响，并且二者分别于价格以及完成度做相关性分析得出的举证太过庞大，数学结论并不直观，因此我们通过典型相关分析，将经度与纬度看成一个变量地区，一起计算价格与地区的相关性以及完成度与地区的相关性。我们将$x$作为地区的位置，$y$作为地区的价格，$z$作为不停地区的完成度，分别计算地区与价格，地区与完成度的相关性分析。我们利用MATLAB中的canoncorr()函数，再利用数学来分别求出相关系数。

$X,Y$分别考虑$X,Y$的线性组合$U_1=a^{T}_{1}X$以及$V_1=b^{T}_{1}Y$,其中$a_1=(a_{11},a_{12},\dots,a_{1p})^T$,$b_1=(b_{11},b_{12},\dots,b_{1p})^T$,由于$Var(U_1)=a_{1}^{T}\sum_{11} a_1$,$Var(V_1)=b_{1}^{T}\sum_{22} b_1$,$Cov(U_1,V_1)=a_{1}^{T}\sum_{12} b_1$,则$U_1,V_1$的相关系数为$$\rho_{u_1,v_1}=\frac{a_{1}^{T}\sum_{12} b_1}{\sqrt{a_{1}^{T}\sum_{11} a_1} \sqrt{b_{1}^{T}\sum_{22} b_1}}$$
典型相关分析在约束条件$a_{1}^{T}\sum_{11} a_1=1,b_{1}^{T}\sum_{22} b_1=1$下，求$a_1,b_1$,使得
$\rho_{u_1,v_1}={a_{1}^{T}\sum_{12} b_1}$取得最大值。通过计算我们得出位置与完成度的相关系数为$r_1=0.02034$，位置与价格的相关系数$r_2=0.1218$，价格与完成度的相关系数$r_3=0.2031$,因此得出这些参数与地区的相关性呈弱相关。
\subsubsection{用聚簇网格化对区域进行分析}
根据我们分析得出，如果区域分得过大则区域之间差别可能不明显，若区域分得过小则区域内样本数过少，可能会产生极大的误差，因此我们可以通过网格把该大地区划分为多个($5km\times5km$)的小区域，并利用聚簇分析网格法分别讨论个区域的定价情况。我们将每个划分的小区域作为一个离散的点进行聚簇。


\begin{figure}[htbp] 
\centering
\includegraphics[width=0.6\textwidth]{成功率随区域变化} 
\caption{成功率随区域变化}
\end{figure}
\newpage
经过聚簇分析，我们得出以下结论：

1.高完成率地区与经济发达地区相吻合，说明经济发展程度与任务完成程度呈正相关。

2.在一些郊区，不仅任务完成数高，任务完成率也较高，但是呈现散点分布，说明这些地区可能是旅游景区或者高端住宅区。

3.在地理位置相近的区域，价格对完成率有一定影响，较高的价格会增加任务的吸引力。

4.某些任务完成率低的区域会被告完成率的区域环绕，例如第(22,8)区域，表明这些区域很可能为湖泊或三角洲地区，人迹稀少，完成率较低。

5.会员比较集中的地区完成度较高，考虑是经济较为发达的地区，会员密度会比较大，


\subsection{问题(2)的模型建立与求解}
本环节将根据附录一的任务完成率，在(1)问的基础上，对原有任务进行重新定价，我们主要考虑了曲线的拟合法，设了一个价格函数$f(x,y)=p_{00}+p_{10}\times x+ p_{01}\times y+p_{20}\times x^2+p_{11}\times xy$,其中$x$为任务总数，$y$为加权人数，$f$表示重新定价后的价格，我们以网格作为聚簇的基本单位，使得每个聚簇的任务数在$1-25$之间，每个地区加权人数在$0-300$之间，运用数据挖掘方法得到需求矩阵$P$，
\subsubsection{模型的提出与建立}
首先我们统计了原有的定价与完成率的关系，计算出不停价格区间的任务完成率，这些任务与价格之间大致呈线性关系发现我们通过现象拟合的思路，用线性回归的方法确定了任务总数与总价的关系，并用拟合的方法求出了二者之间的数学关系式$d_2=g(d_1)=\frac{1000}{15}d_1$,然后又利用散点图做出了完成度低的地区分布
\begin{figure}[htbp]  
\centering
\includegraphics[width=0.3\textwidth]{完成率} 
\caption{定价与完成率的关系}
\end{figure}
\begin{figure}[htbp] 
\centering
\includegraphics[width=0.6\textwidth]{完成度低} 
\caption{完成度低地区分布}
\end{figure}
\begin{figure}[htbp] 
\centering
\includegraphics[width=0.5\textwidth]{任务总价} 
\caption{任务总数与总价的关系}
\end{figure}
\begin{figure}[htbp] 
\centering
\includegraphics[width=0.6\textwidth]{任务均价} 
\caption{任务总数与均价的关系}
\end{figure}
\newpage
\subsubsection{数据处理方法和过程}
\begin{figure}[htbp]  
\centering
\includegraphics[width=0.6\textwidth]{价格加权人数任务数} 
\caption{价格加权人数任务数}
\end{figure}
\newpage
\subsection{问题(3)的模型建立与求解}
\subsubsection{利用k means 聚类算法对任务进行打包}
从之前的分析中可以看出，任务分布具有很高的区域性，呈簇集形状。于是我们通过k-mean算法对附录一中的数据进行聚类区分。考虑到人们更倾向于在最短的距离内完成任务，获得最多的收益，我们将欧式距离作为分类标准，把距离相近的任务打包为一个新任务，将此新任务所包含的小任务坐标的中心点作为新任务的位置坐标，同时将每个任务对小任务平均距离给出，显示在app上供会员查看。于是我们查找广州居民的出行目的和方式及其比率如下：
\\
\centerline{广州不同年龄居民出行目的比较(单位\%)}

\begin{tabular}{|cccccccccc|}

\hline
年龄 &上班&上学&公务&购物&餐饮娱乐&社交&回家&其他&合计\\
\hline
6-12岁 &-&47.31&-&0.65&1.72&0.22&49.89&0.21&100\\
\hline
13-18岁 &0.29&43.55&0.29&3.44&1.72&0.86&49.56&0.29&100\\
\hline
19-28岁 &31.33&5.95&0.92&7.16&3.35&0.61&50.00&0.68&100\\
\hline
29-55岁 &35.60&0.18&1.29&7.51&2.78&0.99&49.86&01.79&100\\
\hline
>55岁 &3.74&0.16&0.43&24.61&9.11&3.63&50.57&7.75&100\\
\hline
\end{tabular}
\\
\\
\centerline{广州不同年龄居民出行方式比较(单位\%)}

\begin{tabular}{|cccccccccc|}

\hline
年龄 &步行&自行车&电瓶车&公共汽车&地铁&单位班车&私家车&出租车&合计\\
\hline
6-12岁 &56.45&4.65&1.06&16.91&5.29&4.65&9.72&1.27&100\\
\hline
13-18岁 &21.02&3.98&0.57&44.89&19.60&3.41&6.25&0.28&100\\
\hline
19-28岁 &14.34&3.43&0.94&0.94&35.62&23.07&16,99&0.26&100\\
\hline
29-55岁 &14.22&4.37&1.02&28.58&13.56&3.33&33.59&1.43&100\\
\hline
>55岁 &65.78&3.35&0.54&20.76&3.73&0.32&4.11&1.41&100\\
\hline
\end{tabular}
\\
\\
可以从图中得出，多数人的出行目的为回家，所以我们把将不具有簇集性的偏远任务单独处理，将打包的数据控制在3-5个为一组，这样可以使得任务间的距离适中，且可以把任务的中心坐标与会员的住所进行距离显示，使得任务与会员回家的目的相关，增加对会员完成任务的吸引力。通过matlab内置的k-means函数，采取欧式距离作为标准，从已知数据中随机产生（）个初始质心，将任务分为（ ）类，同时显示新任务中心点和任务距离中心点的平均距离。
\subsubsection{对打包任务的定价}
\subsection{问题(4)的模型建立与求解}
对于问题(4)，我们考虑在问题(2)的基础上，主要把问题(2)中利用贪心算法的模型应用到上面来。
\section{结果分析}
\subsection{模型的优点}
1.建立了任务数量、会员人数、任务完成率的评价指标，并采用曲线拟合的思想方法分析问题，将评价指标用高度以及颜色表示，其连续的变化趋势以及尖点均直观的表示了出来，便于统计和定性的分析

2.在通过典型相关分析算得若相关性后，利用聚簇网格分析法将地区分成很多小部分，从而采用聚簇的思想对大量数据进行筛选和近似处理，所谓“聚簇”是为了提高对于某个属性的搜索或者使用的 效率，因为数据量太多，且不同指标取样点的经纬度不是严格对应的，所以，将地区分为若干块提取特征信息，并选择具有代表意义的网格，最终得出了较一般的定性结论。


\subsection{模型的缺点}
1.在问题中我们假设会员的活动范围都是相同的，但实际中不同会员的活动范围是不同的，这与实际情况相比可能会带来误差

2.实际情况中，一个会员很可能同时接几单，并且在附近的地区几乎同时完成

3.实际上，APP的还原人数是会变化的，一般来说会员人数会逐渐增加
\section{模型评价与推广}
\newpage  
\appendix 
\begin{thebibliography}{9}
\bibitem{1} MATLAB的N个实用技巧, 刘焕近，李鹏等编著
\bibitem{2} 数学模型(第四版)，姜启源 谢金星 叶俊 编
\bibitem{3} 广州市居民出行特征分析及交通发展的对策
\end{thebibliography}
\section{附录}
\paragraph{价格的三维热点图MATLAB代码}
\begin{verbatim}
A=xlsread('附件一：已结束项目任务数据.xls');
x=A(:,1);y=A(:,2);z=A(:,3);

scatter(x,y,5,z)%散点图
xlabel('纬度');
ylabel('经度');
zlabel('价格');
title('价格与经纬度散点图');
colorbar
figure
[X,Y,Z]=griddata(x,y,z,linspace(22.4,23.3)',linspace(113,114.5),'v4');%插值
pcolor(X,Y,Z);shading interp%伪彩色图
xlabel('纬度');grid on;
ylabel('经度');grid on;
zlabel('价格');grid on;
title('价格与经纬度关伪彩色图');
colorbar
figure,contourf(X,Y,Z) %等高线图
xlabel('纬度');
ylabel('经度');
zlabel('价格');
title('价格与经纬度等高线图');
colorbar
figure,surf(X,Y,Z)%三维曲面                    %三维曲面
xlabel('纬度');
ylabel('经度');
zlabel('价格');
title('价格与经纬度三维曲面');
colorbar
\end{verbatim}
\paragraph{经纬度与价格图的MATLAB代码}
\begin{verbatim}
A=xlsread('附件一：已结束项目任务数据.xls');
x=A(:,1);y=A(:,2);z=A(:,3);e=A(:,4)
a=[x,y];
[A,B,r]=canoncorr(z,e)
\end{verbatim}

\end{document}

